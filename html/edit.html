<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>AX2 - ê°•ì˜ ë²ˆì—­ í¸ì§‘</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="../css/edit.css">
</head>
<body>
    <!-- ëª¨ë°”ì¼ ë©”ë‰´ ë²„íŠ¼ -->
    <button class="mobile-menu-btn" id="mobileMenuBtn" style="display: none;">
        <i class="fas fa-bars"></i>
    </button>
    
    <!-- ì‚¬ì´ë“œë°” ì˜¤ë²„ë ˆì´ -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” í”Œë ˆì´ìŠ¤í™€ë” -->
    <div id="nav-placeholder"></div>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <div class="main-content">
        <!-- ì¢Œì¸¡ í¸ì§‘ ì˜ì—­ -->
        <div class="edit-section">
            <div class="video-title-display" id="video-title-display">
                <div class="title-wrapper">
                    <h2 class="video-title-text" id="video-title-text">ê°•ì˜ ì œëª©</h2>
                    <button class="edit-title-btn" id="edit-title-btn" title="ì œëª© í¸ì§‘">
                        <i class="fas fa-pencil-alt"></i>
                    </button>
                </div>
            </div>
            <div class="edit-header">
                <div class="language-tabs">
                    <div class="lang-tab active" data-lang="ko">
                        <span class="lang-flag">ğŸ‡°ğŸ‡·</span>
                        <span>Korean</span>
                    </div>
                    <div class="lang-tab" data-lang="en">
                        <span class="lang-flag">ğŸ‡ºğŸ‡¸</span>
                        <span>English</span>
                    </div>
                </div>
            </div>

            <div class="transcription-list" id="transcription-list">
                <!-- í…ìŠ¤íŠ¸ ì„¸ê·¸ë¨¼íŠ¸ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
        </div>

        <!-- ìš°ì¸¡ ë¹„ë””ì˜¤ ì˜ì—­ -->
        <div class="video-section">
            <div class="video-tabs">
                <button class="video-tab active" data-tab="original">ì›ë³¸</button>
                <button class="video-tab" data-tab="translation">ë²ˆì—­</button>
            </div>

            <div class="warning-banner">
                í¸ì§‘í•œ ë‚´ìš©ì€ ìë™ìœ¼ë¡œ ë°˜ì˜ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì™„ë£Œ í›„ 'ë³€ê²½ì‚¬í•­ ì ìš©í•˜ê¸°'ë¥¼ ëˆŒëŸ¬ ì ìš©í•´ ì£¼ì„¸ìš”.
            </div>

            <div class="video-container">
                <!-- ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì˜ì—­ (ë¹„ë””ì˜¤ê°€ ì—†ì„ ë•Œ í‘œì‹œ) -->
                <div class="video-drop-zone" id="video-drop-zone" style="display: none;">
                    <input type="file" id="video-file-input" class="hidden" accept="video/*">
                    <div class="drop-zone-content">
                        <div class="drop-zone-icon">
                            <img src="../assets/image/cloud.png" alt="ì—…ë¡œë“œ" style="width: 100%; height: 100%; object-fit: contain;">
                        </div>
                        <h3 class="drop-zone-title">ì˜ìƒì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</h3>
                        <p class="drop-zone-subtitle">MP4, MOV, AVI, WEBM (ìµœëŒ€ 2GB)</p>
                    </div>
                </div>
                
                <!-- ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ (ë¹„ë””ì˜¤ê°€ ìˆì„ ë•Œ í‘œì‹œ) -->
                <div class="video-player-wrapper" id="video-player-wrapper" style="display: flex;">
                    <video class="video-player" id="video-player" preload="metadata" controls>
                        <source src="" type="video/mp4">
                    </video>
                    <div class="subtitle-overlay" id="subtitle-overlay">
                        <div class="subtitle-text" id="subtitle-text"></div>
                    </div>
                </div>
                
                <!-- ë¹„ë””ì˜¤ ë¡œë“œ ì‹¤íŒ¨ placeholder -->
                <div class="video-placeholder" id="video-placeholder" style="display: none;">
                    <i class="fas fa-video-slash"></i>
                    <div>ë¹„ë””ì˜¤ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</div>
                    <div style="font-size: 14px; color: #999999; margin-top: 8px;">ë¹„ë””ì˜¤ íŒŒì¼ì´ ì—†ê±°ë‚˜ ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>
                    <button class="retry-btn" onclick="document.getElementById('video-file-input').click()" style="margin-top: 16px; padding: 8px 16px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer;">
                        ë‹¤ì‹œ ì‹œë„
                    </button>
                </div>
            </div>

            <div class="video-controls">
                <div class="action-buttons">
                    <button class="action-btn apply-btn-inline" onclick="applyChanges()">
                        ë³€ê²½ì‚¬í•­ ì ìš©í•˜ê¸°
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ì œëª© í¸ì§‘ ëª¨ë‹¬ -->
    <div class="title-edit-modal" id="title-edit-modal" style="display: none;">
        <div class="modal-backdrop" id="title-modal-backdrop"></div>
        <div class="title-edit-modal-content">
            <div class="title-edit-modal-header">
                <h3>ì œëª© í¸ì§‘</h3>
                <button class="title-edit-modal-close" id="title-edit-modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="title-edit-modal-body">
                <input type="text" class="title-edit-input" id="title-edit-input" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" maxlength="100">
                <div class="title-edit-char-count">
                    <span id="title-char-count">0</span> / 100
                </div>
            </div>
            <div class="title-edit-modal-footer">
                <button class="title-edit-cancel-btn" id="title-edit-cancel-btn">ì·¨ì†Œ</button>
                <button class="title-edit-save-btn" id="title-edit-save-btn">ì €ì¥</button>
            </div>
        </div>
    </div>

    <script src="../js/i18n.js" defer></script>
    <script src="../js/nav-bar.js" defer></script>
    <script src="../js/auth-state.js" defer></script>
    <script src="../js/edit.js" defer></script>
    <script>
        // ë”ë³´ê¸° ë©”ë‰´ í† ê¸€
        document.addEventListener('DOMContentLoaded', function() {
            const moreMenuBtn = document.getElementById('moreMenuBtn');
            const moreMenuDropdown = document.getElementById('moreMenuDropdown');
            
            if (moreMenuBtn && moreMenuDropdown) {
                moreMenuBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    moreMenuDropdown.classList.toggle('active');
                });
                
                // ì™¸ë¶€ í´ë¦­ ì‹œ ë©”ë‰´ ë‹«ê¸°
                document.addEventListener('click', function(e) {
                    if (!moreMenuBtn.contains(e.target) && !moreMenuDropdown.contains(e.target)) {
                        moreMenuDropdown.classList.remove('active');
                    }
                });
            }
            
            // ì–¸ì–´ ì„¤ì • ê¸°ëŠ¥
            const languageOptions = document.querySelectorAll('.language-dropdown-menu .language-option');
            const currentLang = localStorage.getItem('siteLanguage') || 'ko';
            
            languageOptions.forEach(option => {
                const lang = option.getAttribute('data-lang');
                if (lang === currentLang) {
                    option.classList.add('active');
                    option.querySelector('.fa-check').style.display = 'inline-block';
                } else {
                    option.classList.remove('active');
                    option.querySelector('.fa-check').style.display = 'none';
                }
                
                option.addEventListener('click', function() {
                    const selectedLang = this.getAttribute('data-lang');
                    localStorage.setItem('siteLanguage', selectedLang);
                    
                    languageOptions.forEach(opt => {
                        opt.classList.remove('active');
                        opt.querySelector('.fa-check').style.display = 'none';
                    });
                    
                    this.classList.add('active');
                    this.querySelector('.fa-check').style.display = 'inline-block';
                });
            });
            
            // í˜„ì¬ í˜ì´ì§€ì— ë”°ë¼ í™œì„± íƒ­ ì„¤ì •
            const tabs = document.querySelectorAll('.service-tab');
            const currentPath = window.location.pathname;
            const currentPage = currentPath.split('/').pop() || 'index.html';
            
            tabs.forEach(tab => {
                const href = tab.getAttribute('href');
                if (href) {
                    const tabPath = href.split('/').pop() || 'index.html';
                    
                    if (tabPath === 'index.html' && (currentPage === 'index.html' || currentPage === 'edit.html')) {
                        tab.classList.add('active');
                    } else if (tabPath === 'storage.html' && currentPage === 'storage.html') {
                        tab.classList.add('active');
                    } else {
                        tab.classList.remove('active');
                    }
                }
            });
        });
    </script>
</body>
</html>

